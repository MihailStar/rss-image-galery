(()=>{"use strict";const e=200;const t=document.querySelector(".header-search-form");if(!(t instanceof HTMLFormElement))throw new Error("$form not found");const r=t.querySelector(".header-search-form__input");if(!(r instanceof HTMLInputElement))throw new Error("$input not found");const n=t.querySelector(".header-search-form__reset");if(!(n instanceof HTMLButtonElement))throw new Error("$reset not found");const o=t.querySelector(".header-search-form__submit");if(!(o instanceof HTMLButtonElement))throw new Error("$submit not found");const s=document.querySelector(".main__container");if(!(s instanceof HTMLDivElement))throw new Error("$container not found");const i=document.querySelector(".footer-api__ratelimit");if(!(i instanceof HTMLSpanElement))throw new Error("$ratelimit not found");function a(e){s.innerHTML="string"==typeof e?'<p class="main__message">'.concat(e,"</p>"):""}function c(t){(async function(t){const r=await fetch("https://api.unsplash.com/search/photos?query=%22{{keyword}}%22&per_page=30".replace("{{keyword}}",t),{headers:{Authorization:"Client-ID ".concat("dX0Qn2MaEGCe_7RrCprje0XLq-DJ2rTzC-osfZJg55k")}});return r.status===e?{status:r.status,results:(await r.json()).results,ratelimit:{limit:Number(r.headers.get("X-Ratelimit-Limit")),remaining:Number(r.headers.get("X-Ratelimit-Remaining"))}}:{status:r.status,errors:(await r.json()).errors}})(t).then((t=>{if(function(t){return t.status!==e}(t))return a("Что-то пошло не так, попробуйте позже"),void console.error(t);if(i.textContent="".concat(t.ratelimit.remaining," / ").concat(t.ratelimit.limit),0===t.results.length)return void a("Не найдено");a("Загружаем");const r=[];t.results.forEach((e=>{var t;r.push((t="".concat(e.urls.raw,"&w=").concat(212,"&dpr=2"),new Promise(((e,r)=>{const n=new Image(212,212);n.onload=()=>e(n),n.onerror=()=>r(),n.src=t}))))})),Promise.all(r).then((e=>{e.forEach((e=>{e.classList.add("main__image")})),a(null),s.append(...e)})).catch((e=>{a("Что-то пошло не так, попробуйте позже"),console.error(e)}))})).catch((e=>{console.error(e)}))}const d={isHidden:n.classList.contains("header-search-form__reset_hidden"),hide(){n.classList.add("header-search-form__reset_hidden"),n.setAttribute("aria-hidden","true"),this.isHidden=!0},show(){n.classList.remove("header-search-form__reset_hidden"),n.removeAttribute("aria-hidden"),this.isHidden=!1}};let u="";t.addEventListener("submit",(e=>{e.preventDefault();const t=r.value.trim();t.length>0&&t!==u&&(u=t,c(t))})),r.addEventListener("input",(()=>{r.value.length>0?d.isHidden&&d.show():d.hide()})),n.addEventListener("click",(()=>{r.focus(),d.hide()})),o.addEventListener("click",(()=>{r.focus()})),c(r.placeholder.length>0?r.placeholder:"frontend")})();